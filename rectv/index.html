<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INADINA TV</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <style>
        :root { --primary: #ff0040; --bg: #0f0a1a; --surface: #1a1825; --text: #e8e6e3; --card-bg: rgba(255,255,255,0.06); }
        body { background: var(--bg); color: var(--text); font-family: 'Poppins', sans-serif; margin: 0; padding-bottom: 20px; }
        .top-bar { padding: 15px 20px; background: var(--surface); display: flex; justify-content: space-between; align-items: center; position: sticky; top:0; z-index:100; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .logo { font-size: 1.4rem; font-weight: 800; color: var(--primary); }
        .header-actions { display: flex; align-items: center; gap: 12px; }
        .online-badge { display: flex; align-items: center; gap: 6px; padding: 6px 10px; background: rgba(0, 255, 127, 0.1); border: 1px solid rgba(0, 255, 127, 0.2); border-radius: 8px; font-size: 0.8rem; font-weight: bold; color: #00ff7f; }
        
        .container { padding: 15px; display: flex; flex-direction: column; gap: 15px; }
        
        /* --- KART DÜZENİ DÜZELTMESİ (V32) --- */
        .card { 
            background: var(--card-bg); 
            border-radius: 12px; 
            padding: 10px; 
            display: flex; 
            flex-direction: row; /* Yan yana zorla */
            align-items: center; 
            gap: 15px; 
            border: 1px solid rgba(255,255,255,0.1); 
            position: relative; 
            height: 90px; /* Yükseklik sabitle */
            overflow: hidden; /* Taşmayı engelle */
            cursor: pointer;
        }
        .card.hidden { display: none; }
        
        .img-box { 
            width: 70px; 
            height: 70px; 
            flex-shrink: 0; /* Küçülmesini engelle */
            position: relative; 
            border-radius: 8px;
            overflow: hidden;
        }
        
        .card-img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; /* Resmi kutuya sığdır */
        }
        
        .badge { position: absolute; top: 0; right: 0; font-size: 0.6rem; padding: 2px 5px; background: orange; color: black; border-radius: 0 0 0 5px; font-weight: bold; }
        .card-info { flex: 1; display: flex; flex-direction: column; justify-content: center; overflow: hidden; }
        .card-name { font-weight: 700; font-size: 1rem; color: white; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card-meta { font-size: 0.75rem; opacity: 0.6; margin-top: 5px; }
        .play-icon { font-size: 1.5rem; color: var(--primary); margin-right: 10px; }

        .load-more-btn { width: 100%; padding: 15px; margin-top: 20px; background: #333; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }
        .load-more-btn.hidden { display: none; }

        /* SOHBET & MODAL STİLLERİ */
        .chat-btn { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background: var(--primary); border-radius: 50%; display: flex; justify-content: center; align-items: center; color: white; font-size: 1.5rem; box-shadow: 0 5px 15px rgba(0,0,0,0.5); z-index: 200; cursor: pointer; }
        .chat-modal { position: fixed; bottom: -100%; left: 0; width: 100%; height: 95%; background: var(--surface); border-radius: 20px 20px 0 0; z-index: 300; transition: bottom 0.3s; display: flex; flex-direction: column; box-shadow: 0 -5px 30px rgba(0,0,0,0.5); }
        .chat-modal.active { bottom: 0; }
        .chat-header { padding: 15px; background: rgba(0,0,0,0.2); display: flex; justify-content: space-between; align-items: center; }
        .chat-messages { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .message-bubble { max-width: 80%; padding: 10px; border-radius: 10px; font-size: 0.9rem; word-wrap: break-word; color: white; }
        .msg-left { align-self: flex-start; background: #333; }
        .msg-right { align-self: flex-end; background: var(--primary); }
        .chat-input-area { padding: 10px; display: flex; gap: 10px; background: rgba(0,0,0,0.3); align-items: center; }
        .chat-input { flex: 1; padding: 10px; border-radius: 20px; border: none; background: rgba(255,255,255,0.1); color: white; }
        .icon-btn { color: white; background: none; border: none; font-size: 1.2rem; cursor: pointer; }
        
        .modal { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:1000; display:none; justify-content:center; align-items:center; }
        .modal-box { background: var(--surface); padding: 20px; border-radius: 15px; width: 90%; max-width: 400px; color: white; border: 1px solid #333; }
        .opt { padding: 15px; background: rgba(255,255,255,0.05); margin-bottom: 10px; border-radius: 10px; display: flex; align-items: center; gap: 10px; cursor: pointer; }
        
        #fileViewerModal .modal-box { height: 70%; display: flex; flex-direction: column; }
        #fvContent { flex: 1; background: #000; color: #0f0; border: 1px solid #333; padding: 10px; font-family: monospace; resize: none; margin: 10px 0; }
        .toast { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); background: #333; color: white; padding: 10px 20px; border-radius: 20px; z-index: 2000; display: none; }
        .toast.show { display: block; }
    </style>
</head>
<body>
    <div id="toast" class="toast">Bildirim</div>

    <div class="top-bar">
        <div class="logo">INADINA TV</div>
        <div class="header-actions">
            <div class="online-badge"><i class="fas fa-users"></i> <span id="onlineCount">0</span></div>
            <a href="https://t.me/inadinatv" style="color:white; font-size:1.5rem;"><i class="fab fa-telegram"></i></a>
        </div>
    </div>

    <div class="container" id="list"></div>
    <button class="load-more-btn" id="loadMoreBtn" onclick="loadMore()">Daha Fazla Göster</button>

    <div class="chat-btn" onclick="document.getElementById('chatModal').classList.toggle('active')"><i class="fas fa-comment-dots"></i></div>

    <div class="chat-modal" id="chatModal">
        <div class="chat-header">
            <span>Canlı Sohbet</span>
            <i class="fas fa-times" onclick="document.getElementById('chatModal').classList.remove('active')"></i>
        </div>
        <div class="chat-messages" id="chatContainer"></div>
        <div class="chat-input-area">
            <button class="icon-btn" onclick="document.getElementById('fileUpload').click()"><i class="fas fa-paperclip"></i></button>
            <button class="icon-btn" onclick="document.getElementById('imgUpload').click()"><i class="fas fa-image"></i></button>
            <input type="file" id="imgUpload" accept="image/*" style="display:none" onchange="handleImageUpload(event)">
            <input type="file" id="fileUpload" accept=".txt,.html,.xml,.m3u" style="display:none" onchange="handleFileUpload(event)">
            <input type="text" class="chat-input" id="msgInput" placeholder="Mesaj...">
            <button class="icon-btn" onclick="sendMsg()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <div id="fileViewerModal" class="modal">
        <div class="modal-box">
            <h3>Dosya İçeriği</h3>
            <textarea id="fvContent" readonly></textarea>
            <div style="display:flex; gap:10px;">
                <button class="opt" style="flex:1; justify-content:center;" onclick="copyFileContent()">Kopyala</button>
                <button class="opt" style="flex:1; justify-content:center; background:#444;" onclick="document.getElementById('fileViewerModal').style.display='none'">Kapat</button>
            </div>
        </div>
    </div>

    <div id="modal" class="modal">
        <div class="modal-box">
            <h3 id="mTitle" style="margin-top:0; text-align:center;">Seçenekler</h3>
            <div class="opt" id="wuffy"><i class="fas fa-play"></i> Wuffy Player</div>
            <div class="opt" id="xpola"><i class="fas fa-rocket"></i> Xpola Player</div>
            <div class="opt" id="externalWeb" style="border:1px solid orange; color:orange;"><i class="fas fa-globe"></i> Tarayıcıda Aç / İndir</div>
            <button class="opt" style="width:100%; justify-content:center; background:#333; margin-top:10px;" onclick="document.getElementById('modal').style.display='none'">İptal</button>
        </div>
    </div>
    
    <div id="imgPreviewModal" class="modal" onclick="this.style.display='none'">
        <img id="imgPreview" src="" style="max-width:95%; max-height:80%; border-radius:10px;">
    </div>

    <script>const categoryData = { 'iptv_list': { 'items': [{"title": "HERON İPTV LİNK", "url": "https://file.garden/Z-hq5n4Shk27aY58/neron-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/2rbhTH", "is_new": true, "added_date": "28.01.2026"}, {"title": "600 KİSİLİK İPTV", "url": "http://tv.devtv.nl/get.php?username=Trexx&password=Trex1fhgd2z&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/VKbxEh", "is_new": false, "added_date": "25.01.2026"}, {"title": "MEGA SPORT BOT İPTV", "url": "https://deathless.short.gy/Full-Bot-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/0yLE8", "is_new": false, "added_date": "24.01.2026"}, {"title": "XTREAM İPTV KODLAR EKLENDİ", "url": "http://babatv.online:8080/get.php?username=Q1S68BKR&password=9U4F7AZ5&type=m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/qKcnO", "is_new": false, "added_date": "23.01.2026"}, {"title": "GOOD İPTV EKLENDİ", "url": "http://tv1site.com:8080/get.php?username=vns171&password=cMynxFnug3bG&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/AYJnPc", "is_new": false, "added_date": "22.01.2026"}, {"title": "711X İPTV LİSTE EKLENDİ", "url": "http://protv65.shop:8080/get.php?username=fk4608&password=fk00xy&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/h7pa", "is_new": false, "added_date": "21.01.2026"}, {"title": "JOKER İPTV M3U", "url": "https://file.garden/Z-hq5n4Shk27aY58/Joker-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/pRN", "is_new": false, "added_date": "20.01.2026"}, {"title": "SUPMOT İPTV İNDİR", "url": "https://file.garden/Z-hq5n4Shk27aY58/supmot-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/sBLi", "is_new": false, "added_date": "19.01.2026"}, {"title": "10 ADET MAC ADRESİ İPTV", "url": "https://file.garden/aMCMLdwOhlHjDvvq/inadinamackod.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/ZZ5c", "is_new": false, "added_date": "18.01.2026"}, {"title": "KRİSTAL İPTV EKLENDİ", "url": "https://file.garden/Z-hq5n4Shk27aY58/Kristal-iptv-W.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/8Gxpf", "is_new": false, "added_date": "18.01.2026"}, {"title": "SMARTES2 İPTV", "url": "http://smartzone1.xyz:8080/get.php?username=zrdQ5UHD&password=q82fkQT&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/xAdwL", "is_new": false, "added_date": "17.01.2026"}, {"title": "10 BİN KİSİLİK İPTV", "url": "https://broken-night-dffb.deathlesstelenyu.workers.dev/dth-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/QfCR", "is_new": false, "added_date": "16.01.2026"}, {"title": "SMART İPTV", "url": "http://smartzone1.xyz:8080/get.php?username=utSzxq7SY6&password=dj1yyFAQJy&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/5kQj", "is_new": false, "added_date": "15.01.2026"}, {"title": "YENİ SPORT İPTV", "url": "https://file.garden/Z-hq5n4Shk27aY58/sport-connec.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/Ry1l", "is_new": false, "added_date": "14.01.2026"}, {"title": "10 SİNİRSİZ İPTV M3U", "url": "https://file.garden/Z-hq5n4Shk27aY58/megaiptv-X.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/7LxRP8", "is_new": false, "added_date": "13.01.2026"}, {"title": "SMARTZONE İPTV", "url": "http://smartzone1.xyz:8080/get.php?username=gRNhEpGh3m&password=fmaAdfkHXJ&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/q9fMZa", "is_new": false, "added_date": "12.01.2026"}, {"title": "MEGA İPTV İNDİR", "url": "https://file.garden/Z-hq5n4Shk27aY58/megaiptv-X.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/G7TFl", "is_new": false, "added_date": "11.01.2026"}, {"title": "1500 MAX SPORTS İPTV", "url": "https://file.garden/aMCMLdwOhlHjDvvq/nadina-1500-Max-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/Se6xQ", "is_new": false, "added_date": "09.01.2026"}, {"title": "QUANTUM İPTV LİST", "url": "https://file.garden/Z-hq5n4Shk27aY58/Kuantum-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/8Xy9", "is_new": false, "added_date": "08.01.2026"}, {"title": "FULL BOT İPTV SPORTS", "url": "https://deathless.short.gy/Full-Bot-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/ld7M", "is_new": false, "added_date": "07.01.2026"}, {"title": "Ekalite iptv m3u", "url": "http://ekalite.xyz:8080/get.php?username=ibrahimtak&password=qwkRZHAwaK&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/4eoXDj", "is_new": false, "added_date": "06.01.2026"}, {"title": "D SPORTS M3U ADRESİ EKLEND", "url": "https://file.garden/Z-hq5n4Shk27aY58/DTH-Sports.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/w2Avb", "is_new": false, "added_date": "05.01.2026"}, {"title": "30 ADET İPTV M3U LİSTE", "url": "http://maisonxp.click/get.php?username=thay123&password=thay123&type=m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/zcn3j7", "is_new": false, "added_date": "04.01.2026"}, {"title": "ELİTE MAC ADRESLERİ İPTV", "url": "https://file.garden/aMCMLdwOhlHjDvvq/playlist.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/DfpE", "is_new": false, "added_date": "04.01.2026"}, {"title": "KARMA İPTV 23K", "url": "https://file.garden/Z-hq5n4Shk27aY58/Karma-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/6WmReB", "is_new": false, "added_date": "03.01.2026"}, {"title": "Yeni iptv liste", "url": "https://file.garden/Z-hq5n4Shk27aY58/DeaTHLesS-TG-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/0cKg", "is_new": false, "added_date": "02.01.2026"}, {"title": "Turkiye Connect iptv", "url": "https://file.garden/Z-hq5n4Shk27aY58/Turkiye-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/6Dr", "is_new": false, "added_date": "01.01.2026"}, {"title": "9500 İPTV M3U LİNKLER YİLBASİ OZEL", "url": "http://ss.wancolonel.xyz:8080/get.php?username=Denisurlu&password=Muri3091&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/3hJ9te", "is_new": false, "added_date": "31.12.2025"}, {"title": "3 Adet İptv link", "url": "https://izleyici.aykara463.workers.dev/DeaTHLesS.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/KCwKj", "is_new": false, "added_date": "30.12.2025"}, {"title": "XTREAM İPTV LİSTELER EKLENDİ", "url": "http://s1.eldest99.xyz:8080/get.php?username=hdkaptantv3706&password=kptn@8723706&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/Clqz", "is_new": false, "added_date": "29.12.2025"}, {"title": "FİLM EKSENİ İPTV", "url": "https://raw.githubusercontent.com/sultansmgr/smart/refs/heads/main/FilmEkseni.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQESVvVD7PLGjrzbMvNGvIFOhRBoSxzoGBFLm3iG-xX1ZEArpkhkSItDVY&s=10", "web_link_url": "https://ay.live/qCS", "is_new": false, "added_date": "28.12.2025"}, {"title": "B. Conneckt İptv", "url": "https://file.garden/Z-hq5n4Shk27aY58/b-connect.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/67w", "is_new": false, "added_date": "28.12.2025"}, {"title": "Spor Kanallari bot iptv", "url": "https://izleyici.aykara463.workers.dev/DeaTHLesS.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/9GlX", "is_new": false, "added_date": "27.12.2025"}, {"title": "100 Bin kisilik iptv", "url": "https://file.garden/Z-hq5n4Shk27aY58/DeaTHLesS-TG-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/6QE", "is_new": false, "added_date": "27.12.2025"}, {"title": "Hibrit İptv", "url": "https://file.garden/Z-hq5n4Shk27aY58/Toplu-Paket-V.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/eAAA7K", "is_new": false, "added_date": "27.12.2025"}, {"title": "553 Adet iptv Liste", "url": "http://otom.191462.xyz:8080/get.php?username=Veritech319&password=Dtx10012023@&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/DGKU", "is_new": false, "added_date": "27.12.2025"}] } }; const activeCategoryKey = 'iptv_list';</script>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyCZFwiLcV4K3EnRDWpPPlXPrXSJxAuMfaQ", authDomain: "iptvbotcoun.firebaseapp.com", databaseURL: "https://iptvbotcoun-default-rtdb.firebaseio.com", projectId: "iptvbotcoun", storageBucket: "iptvbotcoun.firebasestorage.app", messagingSenderId: "229841892818", appId: "1:229841892818:web:a91dd3792919140a5d440b" };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        let current = {}, itemsPerPage = 10, currentlyShown = 0;
        let myUserName = localStorage.getItem('uName') || "Misafir_" + Math.floor(Math.random()*1000);
        let myUUID = localStorage.getItem('uuid') || 'u_'+Date.now();
        localStorage.setItem('uuid', myUUID);
        let isAdmin = localStorage.getItem('is_admin') === 'true';

        const ADMIN_PASS = "burhan_baba_72";
        const TG_BOT_TOKEN = "8437262061:AAGnhDFIjFqNL5PlUGS33mUaXEMlKd1yyzk";
        const TG_CHAT_ID = "666941331";

        function render() {
            const container = document.getElementById('list');
            const items = categoryData['iptv_list'].items;
            const btn = document.getElementById('loadMoreBtn');
            
            // İlk açılışta temizle
            if(currentlyShown === 0) container.innerHTML = '';

            const end = Math.min(currentlyShown + itemsPerPage, items.length);
            for(let i = currentlyShown; i < end; i++) {
                const item = items[i];
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `<div class="img-box"><img src="${item.image}" class="card-img" onerror="this.src='https://via.placeholder.com/60'">${item.is_new ? '<span class="badge">YENİ</span>' : ''}</div><div class="card-info"><div class="card-name">${item.title}</div><div class="card-meta">${item.added_date}</div></div><i class="fas fa-play-circle play-icon"></i>`;
                card.onclick = () => { current = item; document.getElementById('mTitle').innerText = item.title; document.getElementById('modal').style.display = 'flex'; };
                container.appendChild(card);
            }
            currentlyShown = end;
            if(currentlyShown >= items.length) btn.style.display = 'none';
        }
        function loadMore() { render(); }

        function showToast(m) { const t = document.getElementById('toast'); t.innerText = m; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'), 3000); }
        
        // CHAT
        function sendMsg() {
            const txt = document.getElementById('msgInput').value.trim();
            if(!txt) return;
            if(txt === ADMIN_PASS) { localStorage.setItem('is_admin','true'); isAdmin=true; location.reload(); return; }
            database.ref('global_chat').push({ user: isAdmin?"YÖNETİCİ":myUserName, text: txt, time: Date.now(), isAdminMsg: isAdmin });
            document.getElementById('msgInput').value = '';
            
            if(TG_BOT_TOKEN.length > 20) fetch(`https://api.telegram.org/bot${TG_BOT_TOKEN}/sendMessage?chat_id=${TG_CHAT_ID}&text=${encodeURIComponent(myUserName+": "+txt)}`);
        }

        // FILES
        function handleImageUpload(e) {
            const f = e.target.files[0]; if(!f) return;
            const r = new FileReader();
            r.onload = function(ev) {
                const img = new Image(); img.onload = function() {
                    const c = document.createElement('canvas'); const ctx = c.getContext('2d');
                    let w=img.width, h=img.height; if(w>600){ h*=600/w; w=600; } c.width=w; c.height=h;
                    ctx.drawImage(img,0,0,w,h);
                    database.ref('global_chat').push({ user: isAdmin?"YÖNETİCİ":myUserName, image: c.toDataURL('image/jpeg',0.5), time: Date.now(), isAdminMsg: isAdmin });
                }; img.src = ev.target.result;
            }; r.readAsDataURL(f); e.target.value='';
        }
        function handleFileUpload(e) {
            const f = e.target.files[0]; if(!f) return;
            if(f.size > 1024*1024) { showToast("Max 1MB!"); return; }
            const r = new FileReader();
            r.onload = function(ev) {
                database.ref('global_chat').push({ user: isAdmin?"YÖNETİCİ":myUserName, file: {name:f.name, data:ev.target.result}, time: Date.now(), isAdminMsg: isAdmin });
            }; r.readAsDataURL(f); e.target.value='';
        }

        function openViewer(data, name) {
            try {
                const txt = atob(data.split(',')[1]);
                document.getElementById('fvContent').value = decodeURIComponent(escape(txt));
                document.getElementById('fileViewerModal').style.display = 'flex';
            } catch(e){ showToast("Dosya açılamıyor"); }
        }
        function copyFileContent() { document.getElementById('fvContent').select(); document.execCommand('copy'); showToast("Kopyalandı"); }

        // LISTENERS
        database.ref('global_chat').limitToLast(50).on('child_added', s => {
            const m = s.val(); const div = document.createElement('div');
            div.className = `message-bubble ${m.user===myUserName?'msg-right':'msg-left'}`;
            let content = m.text || '';
            if(m.image) content = `<img src="${m.image}" style="max-width:100%; border-radius:5px;" onclick="document.getElementById('imgPreview').src='${m.image}'; document.getElementById('imgPreviewModal').style.display='flex'">`;
            if(m.file) content = `<div onclick="openViewer('${m.file.data}','${m.file.name}')" style="cursor:pointer; color:orange;"><i class="fas fa-file"></i> ${m.file.name}</div>`;
            
            div.innerHTML = `<b style="font-size:0.7rem; color:${m.isAdminMsg?'red':'yellow'}">${m.user}</b><br>${content}`;
            const c = document.getElementById('chatContainer'); c.appendChild(div); c.scrollTop = c.scrollHeight;
        });
        database.ref('online_users').on('value', s => document.getElementById('onlineCount').innerText = s.numChildren());
        const con = database.ref('online_users').push(); con.onDisconnect().remove(); con.set(true);

        // PLAYERS
        document.getElementById('wuffy').onclick = () => window.location.href=`intent://${btoa(current.url)}#Intent;scheme=xmtv;package=co.wuffy.player;end`;
        document.getElementById('xpola').onclick = () => window.location.href=`intent://${btoa(current.url)}#Intent;scheme=xmtv-m3u;package=com.xpola.player;end`;
        document.getElementById('externalWeb').onclick = () => window.location.href = current.web_link_url;

        render();
    </script>
</body>
</html>