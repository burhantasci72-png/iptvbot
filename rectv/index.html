<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INADINA TV</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;800&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <style>
        :root { 
            --hue: 345; 
            --primary: hsl(var(--hue), 100%, 50%); 
            --bg: #0f0a1a; 
            --surface: #1a1825; 
            --text: #e8e6e3; 
            --card-bg: rgba(255,255,255,0.06); 
            --border: rgba(255,255,255,0.03); 
            --accent-blue: #00d2ff;
        }
        
        body { background: var(--bg); color: var(--text); font-family: 'Poppins', sans-serif; margin: 0; padding-bottom: 20px; transition: background 0.3s, color 0.3s; }
        body.light-theme { --bg: #f5f5f5; --surface: #ffffff; --text: #1a1a1a; --card-bg: #ffffff; --border: #e0e0e0; }

        /* ÃœST BAR */
        .top-bar { padding: 15px 20px; background: var(--surface); display: flex; justify-content: space-between; align-items: center; position: sticky; top:0; z-index:100; box-shadow: 0 4px 15px rgba(0,0,0,0.4); }
        .logo { font-size: 1.6rem; font-weight: 800; background: linear-gradient(135deg, #ff0040, #ff4d00); -webkit-background-clip: text; color: transparent; text-shadow: 0 0 10px rgba(255,0,64,0.2); }

        /* --- KAYAN YAZI (ANNOUNCEMENT BAR) Ä°YÄ°LEÅžTÄ°RÄ°LMÄ°Åž --- */
        .announcement-bar { 
            background: linear-gradient(90deg, #ffeb3b, #fbc02d); 
            color: #000; 
            overflow: hidden; 
            white-space: nowrap; 
            padding: 8px 0; 
            font-weight: 800; 
            font-size: 0.95rem; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); 
            display: none; 
            border-top: 2px solid rgba(0,0,0,0.1);
            border-bottom: 2px solid rgba(0,0,0,0.2);
            position: relative;
        }
        .announcement-content { display: inline-block; padding-left: 100%; animation: scroll-left 15s linear infinite; }
        @keyframes scroll-left { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

        /* --- GERÄ° SAYIM KUTUSU (COUNTDOWN BOX) Ä°YÄ°LEÅžTÄ°RÄ°LMÄ°Åž --- */
        .countdown-box { 
            background: linear-gradient(135deg, #1a1825, #000); 
            border: 3px solid #ff0040; 
            border-radius: 18px; 
            padding: 20px; 
            text-align: center; 
            position: relative; 
            overflow: hidden; 
            display: none; 
            box-shadow: 0 10px 30px rgba(255, 0, 64, 0.3);
            animation: pulse-border 3s infinite;
        }
        @keyframes pulse-border {
            0% { border-color: #ff0040; box-shadow: 0 0 10px rgba(255, 0, 64, 0.2); }
            50% { border-color: #ff4d00; box-shadow: 0 0 25px rgba(255, 77, 0, 0.4); }
            100% { border-color: #ff0040; box-shadow: 0 0 10px rgba(255, 0, 64, 0.2); }
        }
        .countdown-title { color: #fff; font-weight: 800; margin-bottom: 12px; font-size: 1.2rem; text-transform: uppercase; letter-spacing: 2px; text-shadow: 0 0 10px #ff0040; }
        .countdown-timer { display: flex; justify-content: center; gap: 12px; font-size: 1.6rem; font-weight: 800; color: white; }
        .time-unit { 
            display: flex; flex-direction: column; align-items: center; 
            background: rgba(255,255,255,0.08); 
            padding: 8px 12px; border-radius: 12px; min-width: 50px; 
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }
        .time-label { font-size: 0.65rem; opacity: 0.7; font-weight: bold; margin-top: 4px; color: var(--accent-blue); }

        /* --- ANKET KUTUSU (POLL BOX) Ä°YÄ°LEÅžTÄ°RÄ°LMÄ°Åž --- */
        .poll-box { 
            background: var(--card-bg); 
            border: 3px solid var(--accent-blue); 
            border-radius: 18px; 
            padding: 20px; 
            display: none; 
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 210, 255, 0.2), inset 0 0 15px rgba(255,255,255,0.05);
            overflow: hidden;
        }
        .poll-box::before {
            content: 'ðŸ“Š'; position: absolute; top: -10px; right: -10px; font-size: 4rem; opacity: 0.05; transform: rotate(15deg);
        }
        .poll-question { 
            font-weight: 800; margin-bottom: 15px; color: #fff; display: block; 
            font-size: 1.1rem; border-bottom: 2px solid rgba(0, 210, 255, 0.2); padding-bottom: 10px;
        }
        .light-theme .poll-question { color: #1a1a1a; border-bottom-color: #ddd; }
        
        .poll-option { margin-bottom: 12px; position: relative; cursor: pointer; transition: transform 0.2s; }
        .poll-option:hover { transform: translateX(5px); }
        .poll-bar-bg { background: rgba(255,255,255,0.1); height: 40px; border-radius: 10px; overflow: hidden; position: relative; border: 1px solid rgba(255,255,255,0.05); }
        .light-theme .poll-bar-bg { background: rgba(0,0,0,0.05); }
        .poll-bar-fill { height: 100%; background: linear-gradient(90deg, var(--accent-blue), #3a7bd5); width: 0%; transition: width 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); opacity: 0.9; }
        .poll-text { position: absolute; top: 0; left: 15px; height: 100%; display: flex; align-items: center; font-size: 0.95rem; font-weight: 800; color: white; z-index: 2; text-shadow: 0 1px 3px rgba(0,0,0,0.8); }
        .poll-percent { position: absolute; top: 0; right: 15px; height: 100%; display: flex; align-items: center; font-size: 0.95rem; font-weight: 800; color: white; z-index: 2; text-shadow: 0 1px 3px rgba(0,0,0,0.8); }

        /* KARTLAR VE GENEL TASARIM */
        .container { padding: 15px; }
        .card { 
            background: var(--card-bg); border-radius: 15px; padding: 12px; margin-bottom: 15px; 
            display: flex; align-items: center; cursor: pointer; border: 1px solid var(--border); 
            position: relative; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); 
        }
        .card:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 8px 25px rgba(0,0,0,0.2); border-color: var(--primary); }
        .light-theme .card { box-shadow: 0 5px 15px rgba(0,0,0,0.05); }

        .img-box { position: relative; width: 60px; height: 60px; flex-shrink: 0; }
        .card-img { width: 100%; height: 100%; border-radius: 12px; object-fit: cover; border: 1px solid rgba(255,255,255,0.1); }
        
        .badge { position: absolute; top: -10px; right: -10px; font-size: 0.7rem; padding: 4px 10px; border-radius: 8px; font-weight: 800; z-index: 10; box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
        .badge-yeni { background: linear-gradient(135deg, #ffab00, #ffea00); color: #000; }
        .badge-iptv { background: linear-gradient(135deg, #00d2ff, #3a7bd5); color: #fff; }

        .card-info { flex: 1; margin-left: 15px; }
        .card-name { font-weight: 800; font-size: 1.1rem; margin-bottom: 4px; color: var(--text); }
        
        .stat-badge { 
            display: inline-flex; align-items: center; gap: 5px; 
            background: rgba(255, 255, 255, 0.05); padding: 3px 10px; 
            border-radius: 10px; font-size: 0.75rem; font-weight: 700; 
            border: 1px solid rgba(255, 255, 255, 0.1); 
        }
        .light-theme .stat-badge { background: rgba(0,0,0,0.05); border-color: rgba(0,0,0,0.1); }
        
        .play-icon { color: var(--primary); font-size: 1.8rem; margin-left: 10px; opacity: 0.8; transition: transform 0.3s; }
        .card:hover .play-icon { transform: scale(1.2) rotate(360deg); opacity: 1; color: #ff0040; }

        /* BUTONLAR */
        .btn-confirm, .btn-cancel, .load-more-btn { 
            transition: all 0.3s; font-weight: 800; cursor: pointer; 
        }
        .btn-confirm:hover, .btn-cancel:hover { transform: scale(1.08); }
        .load-more-btn { 
            width: calc(100% - 30px); margin: 20px 15px; padding: 16px; border: none; border-radius: 18px; 
            background: linear-gradient(135deg, var(--primary), #ff4d00); color: white; 
            font-size: 1rem; box-shadow: 0 8px 20px rgba(255, 0, 64, 0.4); 
        }
        .load-more-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(255, 0, 64, 0.6); }

        /* MODAL */
        .modal-box { 
            background: var(--surface); width: 88%; max-width: 400px; border-radius: 25px; 
            padding: 25px; border: 1px solid var(--border); box-shadow: 0 20px 50px rgba(0,0,0,0.6); 
        }
        .light-theme .modal-box { box-shadow: 0 20px 50px rgba(0,0,0,0.2); }
        .opt { 
            display: flex; align-items: center; padding: 18px; margin: 10px 0; border-radius: 15px; 
            background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.05); 
            transition: all 0.3s; 
        }
        .opt:hover { background: rgba(255,255,255,0.1); transform: translateX(8px); border-color: var(--primary); }

        /* SOHBET DÃœÄžMESÄ° VE PANELÄ° */
        .chat-btn { 
            position: fixed; bottom: 25px; right: 25px; width: 65px; height: 65px; 
            background: linear-gradient(135deg, #00d2ff, #3a7bd5); border-radius: 50%; 
            display: flex; justify-content: center; align-items: center; color: white; 
            font-size: 1.8rem; box-shadow: 0 10px 25px rgba(0,210,255,0.4); cursor: pointer; 
            z-index: 200; animation: pulse-beat 2s infinite ease-in-out; 
        }
        @keyframes pulse-beat { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        
        .live-blink { color: #ff0040; animation: blink-red 1s infinite; font-size: 1.8rem; font-weight: 900; }
        @keyframes blink-red { 0% { opacity: 1; transform: scale(1); } 50% { opacity: 0.4; transform: scale(1.1); } 100% { opacity: 1; transform: scale(1); } }

        /* TOAST */
        .toast { 
            visibility: hidden; min-width: 250px; background: #1a1825; border: 2px solid var(--primary); 
            color: #fff; text-align: center; border-radius: 50px; padding: 16px; position: fixed; 
            z-index: 2000; left: 50%; bottom: 100px; transform: translateX(-50%); 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); opacity: 0; transition: all 0.3s; 
        }
        .toast.show { visibility: visible; opacity: 1; bottom: 110px; }

        .feature-container { margin: 15px; display: flex; flex-direction: column; gap: 20px; }

        /* INPUT ODAKLANMA */
        input:focus { border-color: var(--primary) !important; box-shadow: 0 0 10px rgba(255,0,64,0.3) !important; }
        
        /* Ã–ZEL MESAJ LÄ°STESÄ° */
        .private-chat-item { 
            background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; 
            margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.05); transition: all 0.3s;
        }
        .private-chat-item:hover { background: rgba(255,255,255,0.1); transform: scale(1.02); border-color: var(--accent-blue); }
        
    </style>
</head>
<body>
    <div id="toast" class="toast"></div>
    
    <div id="maintenanceScreen">
        <i class="fas fa-tools" style="font-size:4rem; margin-bottom:20px; color:#ffeb3b;"></i>
        <h1 style="font-weight:800;">BAKIM MODU</h1>
        <p style="color:#fff; opacity:0.7;">Åžu an sistem gÃ¼ncelleniyor.<br>LÃ¼tfen daha sonra tekrar deneyin.</p>
        <input type="password" id="emergencyPass" class="emergency-input" placeholder="YÃ¶netici Åžifresi">
        <button onclick="emergencyLogin()" class="emergency-btn">GiriÅŸ Yap</button>
    </div>

    <div id="bannedScreen" class="banned-screen">
        <i class="fas fa-ban" style="font-size:5rem; margin-bottom:20px;"></i>
        <div style="font-weight:900;">ENGELLENDÄ°NÄ°Z</div>
        <div style="font-size:1.1rem; color:white; margin-top:15px; opacity:0.8;">Sohbet kurallarÄ±na uymadÄ±ÄŸÄ±nÄ±z iÃ§in eriÅŸiminiz kapatÄ±ldÄ±.</div>
    </div>

    <!-- MODALLAR VE DÄ°ÄžER ELEMENTLER (BURASI AYNI KALACAK) -->
    <div id="imgPreviewModal" onclick="this.style.display='none'">
        <i class="fas fa-times"></i>
        <img id="imgPreview" src="">
    </div>

    <div id="confirmModal" class="modal">
        <div class="modal-box" style="text-align:center;">
            <i class="fas fa-exclamation-triangle" style="font-size:3.5rem; color:#ff4d4d; margin-bottom:15px;"></i>
            <h3 id="confirmTitle" style="color:var(--text); font-weight:800;">Emin misin?</h3>
            <p id="confirmText" style="color:var(--text); opacity:0.8; margin-bottom:20px;">Bu iÅŸlem geri alÄ±namaz.</p>
            <div style="display:flex; gap:12px; justify-content:center;">
                <button class="btn-cancel" onclick="closeConfirm()" style="flex:1;">VAZGEÃ‡</button>
                <button class="btn-confirm" id="btnConfirmAction" style="flex:1;">ONAYLA</button>
            </div>
        </div>
    </div>

    <div id="userActionModal" class="modal">
        <div class="modal-box">
            <h3 id="uaTitle" style="color:var(--accent-blue); font-weight:800; text-align:center;">KullanÄ±cÄ±</h3>
            <button class="action-menu-btn" onclick="executeUserAction('reply')"><i class="fas fa-reply"></i> YanÄ±tla</button>
            <button class="action-menu-btn" onclick="executeUserAction('private')"><i class="fas fa-envelope"></i> Ã–zel Mesaj At</button>
            <div id="adminUserActions" style="display:none; border-top:2px solid rgba(255,255,255,0.05); margin-top:10px; padding-top:10px;">
                <button class="action-menu-btn" onclick="executeUserAction('ban')" style="color:#ff4d4d;"><i class="fas fa-user-slash"></i> Engelle (BAN)</button>
                <button class="action-menu-btn" onclick="executeUserAction('delete')" style="color:#aaa;"><i class="fas fa-trash-alt"></i> MesajÄ± Sil</button>
            </div>
            <button class="btn-cancel" onclick="document.getElementById('userActionModal').style.display='none'" style="width:100%; margin-top:15px;">Kapat</button>
        </div>
    </div>

    <!-- ÃœST BAR -->
    <div class="top-bar">
        <div class="logo">INADINA TV</div>
        <div class="header-actions">
            <div class="online-badge"><i class="fas fa-users"></i> <span id="onlineCount">0</span></div>
            <button class="theme-btn" onclick="toggleTheme()" id="themeBtn"><i class="fas fa-moon"></i></button>
            <a href="https://t.me/inadinatv" style="color:white; font-size:1.6rem; margin-left:10px;"><i class="fab fa-telegram"></i></a>
        </div>
    </div>

    <!-- KAYAN DUYURU -->
    <div id="announcementBar" class="announcement-bar">
        <div class="announcement-content" id="announcementText">YayÄ±nlarÄ±mÄ±z kesintisiz devam ediyor! Keyifli seyirler dileriz.</div>
    </div>

    <!-- ANKET VE GERÄ° SAYIM ALANI -->
    <div class="feature-container" id="featureContainer">
        <!-- COUNTDOWN -->
        <div id="countdownBox" class="countdown-box">
            <div id="countdownTitle" class="countdown-title">DERBÄ° MAÃ‡I</div>
            <div id="countdownTimer" class="countdown-timer">
                <div class="time-unit"><span id="cdDays">00</span><span class="time-label">GÃœN</span></div>
                <div class="time-unit"><span id="cdHours">00</span><span class="time-label">SAAT</span></div>
                <div class="time-unit"><span id="cdMins">00</span><span class="time-label">DAK</span></div>
                <div class="time-unit"><span id="cdSecs">00</span><span class="time-label">SAN</span></div>
            </div>
            <div id="liveIndicator" class="live-blink">CANLI YAYIN ðŸ”´</div>
        </div>

        <!-- POLL -->
        <div id="pollBox" class="poll-box">
            <span id="displayPollQuestion" class="poll-question">Kim kazanÄ±r?</span>
            <div class="poll-option" onclick="votePoll('opt1')">
                <div class="poll-bar-bg"><div id="bar1" class="poll-bar-fill"></div></div>
                <div class="poll-text" id="displayOpt1">A TakÄ±mÄ±</div>
                <div class="poll-percent" id="percent1">0%</div>
            </div>
            <div class="poll-option" onclick="votePoll('opt2')">
                <div class="poll-bar-bg"><div id="bar2" class="poll-bar-fill"></div></div>
                <div class="poll-text" id="displayOpt2">B TakÄ±mÄ±</div>
                <div class="poll-percent" id="percent2">0%</div>
            </div>
        </div>
    </div>

    <div class="container"><div id="list"></div></div>
    
    <button class="load-more-btn" id="loadMoreBtn" onclick="loadMore()">Daha Fazla GÃ¶ster</button>

    <div class="chat-btn" onclick="toggleChat()"><i class="fas fa-comments"></i></div>
    <div class="admin-panel-btn" id="adminBtn" onclick="openAdminPanel()"><i class="fas fa-user-shield"></i></div>
    
    <!-- CHAT MODAL (AynÄ± YapÄ±) -->
    <div class="chat-modal" id="chatModal">
        <div class="chat-header">
            <div class="chat-header-top">
                <div style="display:flex; align-items:center; gap:10px;">
                    <span style="font-weight:800;" id="chatStatus">CanlÄ± Sohbet ðŸŸ¢</span>
                    <i class="fas fa-user-edit" onclick="openNameModal()" style="cursor:pointer; opacity:0.7;" title="Ä°sim DeÄŸiÅŸtir"></i>
                </div>
                <i class="fas fa-times chat-close" onclick="toggleChat()"></i>
            </div>
            <div class="chat-tabs">
                <div class="chat-tab active" id="tabGlobal" onclick="switchChatTab('global')">GENEL</div>
                <div class="chat-tab" id="tabPrivate" onclick="switchChatTab('private')">Ã–ZEL <span id="pmBadge" class="chat-tab-badge">0</span></div>
            </div>
        </div>
        
        <div class="chat-rules" id="chatRulesBanner"><i class="fas fa-shield-alt"></i> Argo ve hakaret yasaktÄ±r!</div>
        
        <div id="viewGlobal" class="chat-view"><div class="chat-messages" id="chatContainer"></div></div>
        <div id="viewPrivateList" class="chat-view hidden"><div class="private-chat-list" id="privateChatListContainer"></div></div>
        <div id="viewPrivateConv" class="chat-view hidden">
            <div style="background:rgba(0,0,0,0.3); padding:10px; display:flex; align-items:center;">
                <button onclick="backToPrivateList()" style="background:none; border:none; color:white; font-size:1.3rem;"><i class="fas fa-chevron-left"></i></button>
                <span id="privateChatUserName" style="margin-left:15px; font-weight:800;">KullanÄ±cÄ±</span>
            </div>
            <div class="chat-messages" id="privateChatContainer"></div>
        </div>

        <div id="replyPreviewBar" class="reply-preview-bar">
            <div style="display:flex; align-items:center; gap:10px;">
                <i class="fas fa-reply"></i> 
                <div><b id="replyToUser">...</b><div id="replyToText" style="font-size:0.75rem;">...</div></div>
            </div>
            <i class="fas fa-times" onclick="cancelReply()" style="cursor:pointer;"></i>
        </div>
        <div class="chat-input-area">
            <div class="input-row">
                <button class="chat-img-btn" onclick="document.getElementById('imgUpload').click()"><i class="fas fa-camera"></i></button>
                <input type="file" id="imgUpload" accept="image/*" style="display:none" onchange="handleImageUpload(event)">
                <input type="text" class="chat-input" id="msgInput" placeholder="Mesaj yazÄ±n...">
                <button class="chat-send" onclick="sendMsg()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="modal">
        <div class="modal-box">
            <h3 id="mTitle" style="text-align:center; margin-top:0; color:var(--primary); font-weight:800;">OynatÄ±cÄ± SeÃ§</h3>
            <div class="opt" id="wuffy"><i class="fas fa-play-circle" style="color:var(--primary); font-size:1.5rem;"></i> <b>Wuffy Player</b></div>
            <div class="opt" id="xpola"><i class="fas fa-bolt" style="color:var(--accent-blue); font-size:1.5rem;"></i> <b>Xpola Player</b></div>
            <div class="opt" id="externalWeb" style="background: rgba(255,171,0,0.1); border-color: #ffab00;">
                <i class="fas fa-external-link-alt" style="color:#ffab00; font-size:1.5rem;"></i> <b style="color:#ffab00">TarayÄ±cÄ±da AÃ§ / Ä°ndir</b>
            </div>
            <button onclick="document.getElementById('modal').style.display='none'" class="btn-cancel" style="width:100%; margin-top:15px; padding:12px;">VAZGEÃ‡</button>
        </div>
    </div>

    <!-- JS KODLARI (BURASI DATA_PLACEHOLDER Ä°LE DEÄžÄ°ÅžECEK) -->
    <script>const categoryData = { 'iptv_list': { 'items': [{"title": "SUPMOT Ä°PTV Ä°NDÄ°R", "url": "https://file.garden/Z-hq5n4Shk27aY58/supmot-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/sBLi", "is_new": true, "added_date": "19.01.2026"}, {"title": "10 ADET MAC ADRESÄ° Ä°PTV", "url": "https://file.garden/aMCMLdwOhlHjDvvq/inadinamackod.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/ZZ5c", "is_new": false, "added_date": "18.01.2026"}, {"title": "KRÄ°STAL Ä°PTV EKLENDÄ°", "url": "https://file.garden/Z-hq5n4Shk27aY58/Kristal-iptv-W.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/8Gxpf", "is_new": false, "added_date": "18.01.2026"}, {"title": "SMARTES2 Ä°PTV", "url": "http://smartzone1.xyz:8080/get.php?username=zrdQ5UHD&password=q82fkQT&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/xAdwL", "is_new": false, "added_date": "17.01.2026"}, {"title": "10 BÄ°N KÄ°SÄ°LÄ°K Ä°PTV", "url": "https://broken-night-dffb.deathlesstelenyu.workers.dev/dth-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/QfCR", "is_new": false, "added_date": "16.01.2026"}, {"title": "SMART Ä°PTV", "url": "http://smartzone1.xyz:8080/get.php?username=utSzxq7SY6&password=dj1yyFAQJy&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/5kQj", "is_new": false, "added_date": "15.01.2026"}, {"title": "YENÄ° SPORT Ä°PTV", "url": "https://file.garden/Z-hq5n4Shk27aY58/sport-connec.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/Ry1l", "is_new": false, "added_date": "14.01.2026"}, {"title": "10 SÄ°NÄ°RSÄ°Z Ä°PTV M3U", "url": "https://file.garden/Z-hq5n4Shk27aY58/megaiptv-X.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/7LxRP8", "is_new": false, "added_date": "13.01.2026"}, {"title": "SMARTZONE Ä°PTV", "url": "http://smartzone1.xyz:8080/get.php?username=gRNhEpGh3m&password=fmaAdfkHXJ&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/q9fMZa", "is_new": false, "added_date": "12.01.2026"}, {"title": "MEGA Ä°PTV Ä°NDÄ°R", "url": "https://file.garden/Z-hq5n4Shk27aY58/megaiptv-X.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/G7TFl", "is_new": false, "added_date": "11.01.2026"}, {"title": "1500 MAX SPORTS Ä°PTV", "url": "https://file.garden/aMCMLdwOhlHjDvvq/nadina-1500-Max-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/Se6xQ", "is_new": false, "added_date": "09.01.2026"}, {"title": "QUANTUM Ä°PTV LÄ°ST", "url": "https://file.garden/Z-hq5n4Shk27aY58/Kuantum-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/8Xy9", "is_new": false, "added_date": "08.01.2026"}, {"title": "FULL BOT Ä°PTV SPORTS", "url": "https://deathless.short.gy/Full-Bot-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/ld7M", "is_new": false, "added_date": "07.01.2026"}, {"title": "Ekalite iptv m3u", "url": "http://ekalite.xyz:8080/get.php?username=ibrahimtak&password=qwkRZHAwaK&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/4eoXDj", "is_new": false, "added_date": "06.01.2026"}, {"title": "D SPORTS M3U ADRESÄ° EKLEND", "url": "https://file.garden/Z-hq5n4Shk27aY58/DTH-Sports.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/w2Avb", "is_new": false, "added_date": "05.01.2026"}, {"title": "30 ADET Ä°PTV M3U LÄ°STE", "url": "http://maisonxp.click/get.php?username=thay123&password=thay123&type=m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/zcn3j7", "is_new": false, "added_date": "04.01.2026"}, {"title": "ELÄ°TE MAC ADRESLERÄ° Ä°PTV", "url": "https://file.garden/aMCMLdwOhlHjDvvq/playlist.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/DfpE", "is_new": false, "added_date": "04.01.2026"}, {"title": "KARMA Ä°PTV 23K", "url": "https://file.garden/Z-hq5n4Shk27aY58/Karma-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/6WmReB", "is_new": false, "added_date": "03.01.2026"}, {"title": "Yeni iptv liste", "url": "https://file.garden/Z-hq5n4Shk27aY58/DeaTHLesS-TG-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/0cKg", "is_new": false, "added_date": "02.01.2026"}, {"title": "Turkiye Connect iptv", "url": "https://file.garden/Z-hq5n4Shk27aY58/Turkiye-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/6Dr", "is_new": false, "added_date": "01.01.2026"}, {"title": "9500 Ä°PTV M3U LÄ°NKLER YÄ°LBASÄ° OZEL", "url": "http://ss.wancolonel.xyz:8080/get.php?username=Denisurlu&password=Muri3091&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/3hJ9te", "is_new": false, "added_date": "31.12.2025"}, {"title": "3 Adet Ä°ptv link", "url": "https://izleyici.aykara463.workers.dev/DeaTHLesS.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/KCwKj", "is_new": false, "added_date": "30.12.2025"}, {"title": "XTREAM Ä°PTV LÄ°STELER EKLENDÄ°", "url": "http://s1.eldest99.xyz:8080/get.php?username=hdkaptantv3706&password=kptn@8723706&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/Clqz", "is_new": false, "added_date": "29.12.2025"}, {"title": "FÄ°LM EKSENÄ° Ä°PTV", "url": "https://raw.githubusercontent.com/sultansmgr/smart/refs/heads/main/FilmEkseni.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQESVvVD7PLGjrzbMvNGvIFOhRBoSxzoGBFLm3iG-xX1ZEArpkhkSItDVY&s=10", "web_link_url": "https://ay.live/qCS", "is_new": false, "added_date": "28.12.2025"}, {"title": "B. Conneckt Ä°ptv", "url": "https://file.garden/Z-hq5n4Shk27aY58/b-connect.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/67w", "is_new": false, "added_date": "28.12.2025"}, {"title": "Spor Kanallari bot iptv", "url": "https://izleyici.aykara463.workers.dev/DeaTHLesS.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/9GlX", "is_new": false, "added_date": "27.12.2025"}, {"title": "100 Bin kisilik iptv", "url": "https://file.garden/Z-hq5n4Shk27aY58/DeaTHLesS-TG-iptv.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/6QE", "is_new": false, "added_date": "27.12.2025"}, {"title": "Hibrit Ä°ptv", "url": "https://file.garden/Z-hq5n4Shk27aY58/Toplu-Paket-V.m3u", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/eAAA7K", "is_new": false, "added_date": "27.12.2025"}, {"title": "553 Adet iptv Liste", "url": "http://otom.191462.xyz:8080/get.php?username=Veritech319&password=Dtx10012023@&type=m3u_plus", "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4yG_juMJsuYS1fMI3WD6l6yqJTAo80TL3k6NqS2G63PIwAxwarsjUuTE&s=10", "web_link_url": "https://ay.live/DGKU", "is_new": false, "added_date": "27.12.2025"}] } }; const activeCategoryKey = 'iptv_list';</script>

    <!-- MEVCUT JS FONKSÄ°YONLARININ DEVAMI -->
    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyCZFwiLcV4K3EnRDWpPPlXPrXSJxAuMfaQ",
          authDomain: "iptvbotcoun.firebaseapp.com",
          databaseURL: "https://iptvbotcoun-default-rtdb.firebaseio.com",
          projectId: "iptvbotcoun",
          storageBucket: "iptvbotcoun.firebasestorage.app",
          messagingSenderId: "229841892818",
          appId: "1:229841892818:web:a91dd3792919140a5d440b"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        let current = {};
        let itemsPerPage = 10; 
        let currentlyShown = itemsPerPage;
        let globalViewCounts = {};
        let globalLikeCounts = {};
        let myLikes = JSON.parse(localStorage.getItem('my_likes') || "[]");
        let myUserName = localStorage.getItem('chat_username');
        let myUUID = localStorage.getItem('user_uuid');
        let isAdmin = localStorage.getItem('is_admin') === 'true';
        let currentReply = null; 
        let isChatLocked = false;
        let countdownInterval;
        let rulesTimeout;

        let currentTab = 'global'; 
        let currentPrivateRoom = null;
        let currentTargetUser = null;
        let activePrivateListener = null;

        const ADMIN_PASS = "burhan_baba_72";
        const TG_BOT_TOKEN = "8437262061:AAGnhDFIjFqNL5PlUGS33mUaXEMlKd1yyzk";
        const TG_CHAT_ID = "666941331";

        if(!myUUID) { myUUID = 'user_' + Date.now() + '_' + Math.floor(Math.random() * 1000); localStorage.setItem('user_uuid', myUUID); }
        if(!myUserName) { myUserName = "Misafir_" + Math.floor(Math.random() * 9000 + 1000); localStorage.setItem('chat_username', myUserName); }

        function openNameModal() { document.getElementById('nameChangeModal').style.display = 'flex'; document.getElementById('newNameInput').value = myUserName; }
        function saveName() { const val = document.getElementById('newNameInput').value.trim(); if(val) { myUserName = val.substring(0, 15); localStorage.setItem('chat_username', myUserName); showToast("Ä°sim DeÄŸiÅŸtirildi", "fa-check"); document.getElementById('nameChangeModal').style.display='none'; } }
        function getUserColor(u) { let h = 0; for (let i = 0; i < u.length; i++) h = u.charCodeAt(i) + ((h << 5) - h); return `hsl(${Math.abs(h % 360)}, 70%, 45%)`; }
        function initPresence() { const ref = database.ref('online_users'); const con = ref.push(); con.onDisconnect().remove(); con.set(true); ref.on('value', (s) => { document.getElementById('onlineCount').innerText = s.numChildren(); }); }
        function showToast(m, i="fa-info-circle") { const t = document.getElementById('toast'); t.innerHTML = `<i class="fas ${i}"></i> <span>${m}</span>`; t.className = "toast show"; setTimeout(() => { t.className = "toast"; }, 3000); }
        function formatTime(ts) { const d = new Date(ts); return d.getHours().toString().padStart(2,'0') + ':' + d.getMinutes().toString().padStart(2,'0'); }

        function sendTelegramNotification(user, msg) {
            if(isAdmin || !TG_BOT_TOKEN || !TG_CHAT_ID) return;
            const text = `ðŸ’¬ Yeni Mesaj: ${user}

${msg || "[Resim]"}`;
            fetch(`https://api.telegram.org/bot${TG_BOT_TOKEN}/sendMessage?chat_id=${TG_CHAT_ID}&text=${encodeURIComponent(text)}`).catch(e => {});
        }

        function updateCountdownDisplay(target) {
            if (countdownInterval) clearInterval(countdownInterval);
            countdownInterval = setInterval(() => {
                const dist = target - new Date().getTime();
                if (dist < 0) { clearInterval(countdownInterval); document.getElementById("countdownTimer").style.display = "none"; document.getElementById("liveIndicator").style.display = "block"; return; }
                document.getElementById("countdownTimer").style.display = "flex"; document.getElementById("liveIndicator").style.display = "none";
                document.getElementById("cdDays").innerText = Math.floor(dist / (1000*60*60*24));
                document.getElementById("cdHours").innerText = Math.floor((dist % (1000*60*60*24)) / (1000*60*60));
                document.getElementById("cdMins").innerText = Math.floor((dist % (1000*60*60)) / (1000*60));
                document.getElementById("cdSecs").innerText = Math.floor((dist % (1000*60)) / 1000);
            }, 1000);
        }

        function updatePollDisplay(data) {
            const total = (data.votes_opt1 || 0) + (data.votes_opt2 || 0);
            const p1 = total === 0 ? 0 : Math.round((data.votes_opt1 / total) * 100);
            const p2 = total === 0 ? 0 : Math.round((data.votes_opt2 / total) * 100);
            document.getElementById('displayPollQuestion').innerText = data.question;
            document.getElementById('displayOpt1').innerText = data.opt1;
            document.getElementById('displayOpt2').innerText = data.opt2;
            document.getElementById('bar1').style.width = p1 + "%";
            document.getElementById('percent1').innerText = p1 + "%";
            document.getElementById('bar2').style.width = p2 + "%";
            document.getElementById('percent2').innerText = p2 + "%";
        }

        function votePoll(opt) {
            if(localStorage.getItem('poll_voted') === 'true') { showToast("Zaten oy verdiniz!", "fa-exclamation"); return; }
            database.ref('extras/poll/votes_' + opt).transaction(c => (c || 0) + 1);
            localStorage.setItem('poll_voted', 'true'); showToast("Oyunuz alÄ±ndÄ±", "fa-check");
        }

        // --- DÄ°ÄžER FONKSÄ°YONLAR (SENDMSG, CHAT, RENDER VB.) MEVCUT KODUNDAN DEVAM EDECEK ---
        // Sadece gÃ¶rsel boardlarÄ±n CSS ve yapÄ±larÄ± yenilendi.

        function listenToData() {
            database.ref('extras').on('value', (s) => { 
                if(s.exists()) { 
                    const e = s.val(); 
                    if(e.countdown && e.countdown.active) { document.getElementById('countdownBox').style.display='block'; updateCountdownDisplay(e.countdown.target); document.getElementById('countdownTitle').innerText = e.countdown.title; }
                    else { document.getElementById('countdownBox').style.display='none'; }
                    if(e.poll && e.poll.active) { document.getElementById('pollBox').style.display='block'; updatePollDisplay(e.poll); }
                    else { document.getElementById('pollBox').style.display='none'; }
                    if(e.announcement && e.announcement.active) { document.getElementById('announcementBar').style.display='block'; document.getElementById('announcementText').innerText = e.announcement.text; }
                    else { document.getElementById('announcementBar').style.display='none'; }
                } 
            });
            // Firebase Presence ve Sohbet Dinleyicileri (Mevcut kodundaki gibi ekle)
        }

        // RENDER VE DÄ°ÄžERLERÄ°...
        function render() {
            const container = document.getElementById('list');
            if (typeof categoryData === 'undefined') return;
            const items = categoryData[activeCategoryKey].items;
            container.innerHTML = '';
            items.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'card' + (index >= itemsPerPage ? ' hidden' : '');
                const safeKey = item.title.replace(/[.#$\/\[\]]/g, '_');
                const views = globalViewCounts[safeKey] || 0;
                const likes = globalLikeCounts[safeKey] || 0;
                card.innerHTML = `
                    <div class="img-box">
                        <img src="${item.image}" class="card-img" onerror="this.src='${bot.default_icon_url}'">
                        ${item.is_new ? '<span class="badge badge-yeni">YENÄ°</span>' : '<span class="badge badge-iptv">IPTV</span>'}
                    </div>
                    <div class="card-info">
                        <div class="card-name">${item.title}</div>
                        <div class="card-meta">
                            <span>${item.added_date}</span>
                            <span class="stat-badge"><i class="fas fa-eye"></i> ${views}</span>
                            <span class="stat-badge"><i class="fas fa-heart"></i> ${likes}</span>
                        </div>
                    </div>
                    <i class="fas fa-play-circle play-icon"></i>
                `;
                card.onclick = () => {
                    current = item;
                    database.ref('channel_views/' + safeKey).transaction(c => (c || 0) + 1);
                    document.getElementById('mTitle').innerText = item.title;
                    document.getElementById('modal').style.display = 'flex';
                };
                container.appendChild(card);
            });
        }

        function toggleChat() { document.getElementById('chatModal').classList.toggle('active'); }
        function toggleTheme() { document.body.classList.toggle('light-theme'); }

        window.onload = () => {
            render();
            listenToData();
            initPresence();
        };

    </script>
</body>
</html>